   <html>
        <head>
           <title>Table</title>
           <meta name="Name" content="App Example: Stories with Attachments" />
           <meta name="Version" content="2010.4" />
           <meta name="Vendor" content="Rally Software" />
           <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.29/sdk.js"></script>
           <script type="text/javascript">

             var table = null;

             function tableExample() {
               var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                                                                    '__PROJECT_OID__',
                                                                                    '__PROJECT_SCOPING_UP__',
                                                                                    '__PROJECT_SCOPING_DOWN__');
              function itemQuery() {
                 var queryObject = {
                   key: 'stories',
                   type: 'HierarchicalRequirement',
                   fetch: 'FormattedID,Name,ScheduleState,Description,Attachments,ObjectID'
                   // query: '(Name contains "release")'
                 };
                 rallyDataSource.findAll(queryObject, populateTable);
              }

              function populateTable(results) {

                  if (table) {
                      table.destroy();
                  }

                 var tableDiv = document.getElementById('aDiv');

                 var config = { 'columnKeys'    : ['FormattedID',  'Name', 'ScheduleState',   'Attachments'],
                                'columnHeaders' : ['ID',           'Name', 'ScheduleState',   'Attachments'],
                                'columnWidths'  : ['100px',        '400px', '85px',           '300px']
                               };
                 table = new rally.sdk.ui.Table(config);
                 table.addRows(results.stories);
                 
                 myStoryURLbase = rally.sdk.util.Context.getServerInfo().getUrl()+"/#/" + '__PROJECT_OID__' + "/detail/userstory/";

                 for (i=0;i<results.stories.length;i++) {

                     myStory = results.stories[i];
                     myStoryURL = myStoryURLbase + myStory.ObjectID;
                     myStoryHTML = "<div><a href='" + myStoryURL + "' target='_top'> " +
                                 myStory.FormattedID + "</a></div>";
                     myAttachments = results.stories[i].Attachments;

                     myAttachmentHTML = "";
                     myAttachmentURLbase = rally.sdk.util.Context.getServerInfo().getSlmUrl()+"/attachment/";
                     for (j=0;j<myAttachments.length;j++) {
                         myAttachmentOID = myAttachments[j].ObjectID;
                         myAttachmentName = myAttachments[j].Name;
                         myAttachmentURL = myAttachmentURLbase + myAttachmentOID + "/" + myAttachmentName;
                         myAttachmentHTML += "<div><a href='" + myAttachmentURL + "'>" +
                                 myAttachmentName + "</a></div>";

                     }
                     table.setCell(i, 3, myAttachmentHTML);
                     table.setCell(i, 0, myStoryHTML);
                 }
                 table.display(tableDiv);

              };
              itemQuery();
             }

             rally.addOnLoad(tableExample);
           </script>
        </head>
        <body>
           <div id="aDiv"></div>
        </body>
        </html>
